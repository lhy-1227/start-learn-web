<!DOCTYPE html>
<html>
	<head>
		
		<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
		<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
		<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
	</head>
	<body id="table">
	
		<script>
			$(document).ready(function(){
				var data = [{"name":"john","age":12},{"name":"peter","age":12},{"name":"marry","age":14}]
				var row = data.length;
				var col = Object.keys(data[0]).length;
				var a = [];
				var str = "";
				str += '<table class="table table-striped">'
				str += '<tr id="a">';
				for(let i=0;i<col;i++){
				
					a.push (Object.keys(data[0])[i]);
					str += "<th"+" "+"id="+ '"'+'tda'+i+'">';
					str += a[i];
					str += '</th>';
				}
				str += '<td>';
				str += '<button id="changea" class="btn btn-primary">修改</button>';
				str += '<button id="deletea" class="btn btn-primary">删除</button>';
				str += '</td>';	
				str += '</tr>';
				
				for(let i=0;i<row;i++){
					str += "<tr"+" "+"id="+ '"'+'tr'+i+'">';
					for(let j=0;j<col;j++){
						str += "<td"+" "+"id="+ '"'+'td'+i+j+'">';
						str += data[i][a[j]];
						str += '</td>';	
					}
					str += '<td>';
					str += '<button id="change'+i+'" class="btn btn-primary">修改</button>';
					str += '<button id="delete'+i+'" class="btn btn-primary">删除</button>';
					str += '</td>';	
					str += '</tr>';
				}
				
				var str1 ='</table><button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">添加</button><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button><h4 class="modal-title" id="myModalLabel">请添加内容</h4></div><div class="modal-body"><table><tr><td >name</td><td >age</td><tr><tr id="add"><td><input type="text" id="add-name"></td><td><input type="text" id="add-age"></td><tr></table></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">关闭</button><button type="submit" class="btn btn-primary" id="tadd">确认添加</button></div></div></div></div>';
				var str2 = str + str1;
				$("#table").html(str2);
				
				$("#delete0").click(function(){
					$("#tr0").hide();
				});
				$("#delete1").click(function(){
					$("#tr1").hide();
				});
				$("#delete2").click(function(){
					$("#tr2").hide();
				});
				$("#delete3").click(function(){
					$("#tr3").hide();
				});
				$("#deletea").click(function(){
					$("#a").hide();
				});
				$("#change0").click(function(){
					$("#td00").html('<input type="text"/>');
					$("#td01").html('<input type="text"/>');
				});
				$("#change1").click(function(){
					$("#td10").html('<input type="text"/>');
					$("#td11").html('<input type="text"/>');
				});
				$("#change2").click(function(){
					$("#td20").html('<input type="text"/>');
					$("#td21").html('<input type="text"/>');
				});
				$("#change3").click(function(){
					$("#td30").html('<input type="text"/>');
					$("#td31").html('<input type="text"/>');
				});
				$("#changea").click(function(){
					$("#tda0").html('<input type="text"/>');
					$("#tda1").html('<input type="text"/>');
				});
				$("#tadd").click(function(){
					var n = $("#add-name").val();
					var a = $("#add-age").val();
					str += '<tr id="z"><td id="n">' + n + '</td><td id="a">' +  a +'</td><td><button id="addc" class="btn btn-primary">修改</button><button id="addd" class="btn btn-primary">删除</button></tr>';
					$("#table").html(str+str1);
					$("#addd").click(function(){
						$("#z").hide();
					});
					$("#addc").click(function(){
						$("#a").html('<input type="text"/>');
						$("#n").html('<input type="text"/>');
					});
					$("#delete0").click(function(){
					$("#tr0").hide();
					});
					$("#delete1").click(function(){
						$("#tr1").hide();
					});
					$("#delete2").click(function(){
						$("#tr2").hide();
					});
					$("#delete3").click(function(){
						$("#tr3").hide();
					});
					$("#deletea").click(function(){
						$("#a").hide();
					});
					$("#change0").click(function(){
						$("#td00").html('<input type="text"/>');
						$("#td01").html('<input type="text"/>');
					});
					$("#change1").click(function(){
						$("#td10").html('<input type="text"/>');
						$("#td11").html('<input type="text"/>');
					});
					$("#change2").click(function(){
						$("#td20").html('<input type="text"/>');
						$("#td21").html('<input type="text"/>');
					});
					$("#change3").click(function(){
						$("#td30").html('<input type="text"/>');
						$("#td31").html('<input type="text"/>');
					});
					$("#changea").click(function(){
						$("#tda0").html('<input type="text"/>');
						$("#tda1").html('<input type="text"/>');
					});
					
					});
				
			});	
			//console.log(str);
		</script>	
	
		
		
	</body>
	 
</html>
